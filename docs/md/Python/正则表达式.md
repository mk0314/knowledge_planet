<!--
 * @Author: mengkun822 1197235402@qq.com
 * @Date: 2023-06-12 09:14:51
 * @LastEditors: mengkun822 1197235402@qq.com
 * @LastEditTime: 2023-06-12 11:45:43
 * @FilePath: \knowledge_planet\docs\md\idea-plugin\Python\正则表达式.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->

> ### 定义

正则是对字符串操作的一种逻辑公式，就是用事先定义好的字符、一些特定字符的组合，
组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤

简写：regex

> 方法

-   match 是用来匹配的方法, 从首字母开始匹配，如果匹配不到就返回 None
-   search 进行正则字符串匹配方法， 匹配的是整个字符串，如果匹配不到就返回 None
-   span 返回位置
-   group 获取匹配的内容
-   findall
-   sub(正则表达式, '新内容', string) 替换

> ### 正则说明

-   \A: 表示从字符串的开始处匹配

-   \Z：表示从字符串的结束处开始匹配，如果存在换行，只能匹配到换行前的结束字符串。

-   \b: 匹配一个单词边界，也就是指单词和空格的位置

-   \B: 匹配非单词边界

-   \d: 匹配任意数字， 等价于[0-9]

-   \D: 匹配非任意数字, 等价于[^/d]

-   \s: 匹配任意空白字符，等价于[\t\n\r\f]

-   \S: 匹配任意非空白字符，等价于[^/s]

-   \w: 匹配任意字母数字以及下划线，等价于 [a-zA-Z0-9_]

-   \W: 匹配任意非字母数字以及下划线，等价于 [^\w]

-   \\\\: 匹配原义的反斜杠\

-   . 用于匹配除换行符(\n)之外的所有字符

-   ^ 用于匹配字符串的开始，即行首

-   $ 用于匹配字符串的末尾（末尾如果有换行符\n，就匹配\n 前面的那个字符）,即行尾

```py

import re

msg = 'hello world'

username = "ajdhk44e5r"
pattern = re.compile('hello')
result = pattern.match(msg)  # match是用来匹配的方法
print(pattern.match(msg), re.match('hellso', msg))
print(re.match('hello', msg).span())
print(re.match('hello', msg).group())
print(re.search(r'^[a-zA-Z][0-9a-zA-Z]{5,}$', username))


msg1 = "a.py b.txt c.docx app.apk"

print(re.findall(r'py\b', msg1))


"""
结果:
<re.Match object; span=(0, 5), match='hello'> None
(0, 5)
hello
<re.Match object; span=(0, 10), match='ajdhk44e5r'>


"""

```

> ### 定义正则验证次数

-   '\*\' 用于将前面的模式匹配 0 次或者多次（贪婪模式，即尽可能多的匹配） >= 0

-   '+' 用于前面的模式匹配 1 次或者多次（贪婪模式） >= 1

-   '?' 用于前面的模式匹配 0 次或 1 次 0, 1

-   '{m}' 用于验证前面的模式匹配 m 次

-   '{m, }' 用于验证前面的模式匹配 m 次或多次

-   '{m, n}' 用于验证前面的模式匹配 m 次并且小于等于 n 次

```python
import re
'手机号正则'
phone = 18811253625
re.match(r'1[35789]/d{9}$', phone)
```

> 常用的正则校验

数字：^[0-9]\_$

n 位的数字：^\d{n}$

至少 n 位的数字：^\d{n,}$

m-n 位的数字：^\d{m,n}$

零和非零开头的数字：^(0|[1-9][0-9]\_)$

非零开头的最多带两位小数的数字：^([1-9][0-9]\*)+(\.[0-9]{1,2})?$

带 1-2 位小数的正数或负数：^(\-)?\d+(\.\d{1,2})$

正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$

有两位小数的正实数：^[0-9]+(\.[0-9]{2})?$

有 1~3 位小数的正实数：^[0-9]+(\.[0-9]{1,3})?$

非零的正整数：^[1-9]\d*$ 或 ^([1-9][0-9]*){1,3}$ 或 ^\+?[1-9][0-9]\_$

非零的负整数：^\-[1-9][]0-9"\_$ 或 ^-[1-9]\d\*$

非负整数：^\d+$ 或 ^[1-9]\d\*|0$

非正整数：^-[1-9]\d\*|0$ 或 ^((-\d+)|(0+))$

> ### 特殊需求表达式

Email 地址：^\w+([-+.]\w+)_@\w+([-.]\w+)_\.\w+([-.]\w+)\*$

域名：[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?

InternetURL：[a-zA-z]+://[^\s]_ 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&=]_)?$

手机号码：^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$

身份证号(15 位、18 位数字)，最后一位是校验位，可能为数字或字符 X：(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)

帐号是否合法(字母开头，允许 5-16 字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$

密码(以字母开头，长度在 6~18 之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w{5,17}$

强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-10 之间)：^(?=._\d)(?=._[a-z])(?=.\*[A-Z])[a-zA-Z0-9]{8,10}$

强密码(必须包含大小写字母和数字的组合，可以使用特殊字符，长度在 8-10 之间)：^(?=._\d)(?=._[a-z])(?=.\*[A-Z]).{8,10}$
